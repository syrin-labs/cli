# Example tool contract: create_report
# This demonstrates a tool that may have side effects (filesystem writes to temp dir)

version: 1
tool: create_report

contract:
  input_schema: ReportRequest
  output_schema: Report

guarantees:
  side_effects: filesystem # Writes to temp directory only
  max_output_size: 1mb

tests:
  - name: create_simple_report
    input:
      report_type: 'summary'
      date_range: 'last_7_days'
    expect:
      output_schema: Report

  - name: create_detailed_report
    input:
      report_type: 'detailed'
      date_range: 'last_30_days'
      include_charts: true
    expect:
      output_schema: Report

  - name: create_report_missing_type
    input:
      date_range: 'last_7_days'
    expect:
      error:
        type: input_validation
        details:
          error_type: missing_argument
          field: report_type

  - name: create_report_invalid_type
    input:
      report_type: 123
      date_range: 'last_7_days'
    expect:
      error:
        type: input_validation
        details:
          error_type: string_type
          field: report_type
          received: int

  - name: create_report_type_mismatch
    input:
      report_type: 'summary'
      date_range: true
      include_charts: 'yes'
    expect:
      error:
        type: input_validation
        details:
          error_type: string_type
          field: date_range
          received: bool
